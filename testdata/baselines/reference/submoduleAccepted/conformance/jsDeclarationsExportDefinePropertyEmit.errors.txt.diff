--- old.jsDeclarationsExportDefinePropertyEmit.errors.txt
+++ new.jsDeclarationsExportDefinePropertyEmit.errors.txt
@@= skipped -0, +0 lines =@@
-<no content>
+index.js(1,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(3,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(4,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(7,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(8,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(9,13): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(11,38): error TS8016: Type assertion expressions can only be used in TypeScript files.
+index.js(12,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(12,58): error TS8004: Type parameter declarations can only be used in TypeScript files.
+index.js(17,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(18,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(19,13): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(21,38): error TS8016: Type assertion expressions can only be used in TypeScript files.
+index.js(22,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(22,58): error TS8004: Type parameter declarations can only be used in TypeScript files.
+index.js(26,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(31,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(32,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(32,58): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(35,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(36,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(36,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(41,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(45,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(46,12): error TS8010: Type annotations can only be used in TypeScript files.
+index.js(46,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(51,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(53,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(54,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(54,54): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(57,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(57,54): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+index.js(58,23): error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+
+
+==== index.js (33 errors) ====
+    Object.defineProperty(module.exports, "a", { value: function a() {} });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    
+    Object.defineProperty(module.exports, "b", { value: function b() {} });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    Object.defineProperty(module.exports.b, "cat", { value: "cat" });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    
+    /**
+     * @param {number} a
+               ~~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     * @param {number} b
+               ~~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     * @return {string} 
+                ~~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     */
+    function d(a, b) { return /** @type {*} */(null); }
+                                         ~
+!!! error TS8016: Type assertion expressions can only be used in TypeScript files.
+    Object.defineProperty(module.exports, "d", { value: d });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+                                                             
+    
+    
+    
+    
+    /**
+    ~~~
+     * @template T,U
+    ~~~~~~~~~~~~~~~~
+     * @param {T} a
+    ~~~~~~~~~~~~~~~
+               ~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     * @param {U} b
+    ~~~~~~~~~~~~~~~
+               ~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     * @return {T & U} 
+    ~~~~~~~~~~~~~~~~~~~
+                ~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     */
+    ~~~
+    function e(a, b) { return /** @type {*} */(null); }
+    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+!!! error TS8004: Type parameter declarations can only be used in TypeScript files.
+                                         ~
+!!! error TS8016: Type assertion expressions can only be used in TypeScript files.
+    Object.defineProperty(module.exports, "e", { value: e });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+                                                             
+    
+    
+    /**
+    ~~~
+     * @template T
+    ~~~~~~~~~~~~~~
+     * @param {T} a
+    ~~~~~~~~~~~~~~~
+               ~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     */
+    ~~~
+    function f(a) {
+    ~~~~~~~~~~~~~~~
+        return a;
+    ~~~~~~~~~~~~~
+    }
+    ~
+!!! error TS8004: Type parameter declarations can only be used in TypeScript files.
+    Object.defineProperty(module.exports, "f", { value: f });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    Object.defineProperty(module.exports.f, "self", { value: module.exports.f });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+                                                             ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    
+    /**
+     * @param {{x: string}} a
+               ~~~~~~~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     * @param {{y: typeof module.exports.b}} b
+               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+     */
+    function g(a, b) {
+        return a.x && b.y();
+    }
+    Object.defineProperty(module.exports, "g", { value: g });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    
+    
+    /**
+     * @param {{x: string}} a
+               ~~~~~~~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+     * @param {{y: typeof module.exports.b}} b
+               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+!!! error TS8010: Type annotations can only be used in TypeScript files.
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+     */
+    function hh(a, b) {
+        return a.x && b.y();
+    }
+    Object.defineProperty(module.exports, "h", { value: hh });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    
+    Object.defineProperty(module.exports, "i", { value: function i(){} });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    Object.defineProperty(module.exports, "ii", { value: module.exports.i });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+                                                         ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    
+    // note that this last one doesn't make much sense in cjs, since exports aren't hoisted bindings
+    Object.defineProperty(module.exports, "jj", { value: module.exports.j });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+                                                         ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    Object.defineProperty(module.exports, "j", { value: function j() {} });
+                          ~~~~~~
+!!! error TS2580: Cannot find name 'module'. Do you need to install type definitions for node? Try `npm i --save-dev @types/node`.
+    