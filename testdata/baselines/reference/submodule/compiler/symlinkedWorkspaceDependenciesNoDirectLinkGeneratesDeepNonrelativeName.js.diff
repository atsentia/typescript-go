--- old.symlinkedWorkspaceDependenciesNoDirectLinkGeneratesDeepNonrelativeName.js
+++ new.symlinkedWorkspaceDependenciesNoDirectLinkGeneratesDeepNonrelativeName.js
@@= skipped -80, +80 lines =@@


 //// [index.d.ts]
-export declare const a: import("package-a/cls").Foo;
+export declare const a: import("package-a").Foo;
+
+
+//// [DtsFileErrors]
+
+
+workspace/packageC/index.d.ts(1,45): error TS2694: Namespace '"workspace/packageA/index"' has no exported member 'Foo'.
+
+
+==== workspace/packageA/foo.d.ts (0 errors) ====
+    export declare class Foo {
+        private f: any;
+    }
+==== workspace/packageA/index.d.ts (0 errors) ====
+    import { Foo } from "./foo.js";
+    export function create(): Foo;
+==== workspace/packageA/package.json (0 errors) ====
+    {
+        "name": "package-a",
+        "version": "0.0.1",
+        "exports": {
+            ".": "./index.js",
+            "./cls": "./foo.js"
+        }
+    }
+==== workspace/packageB/package.json (0 errors) ====
+    {
+        "private": true,
+        "dependencies": {
+            "package-a": "file:../packageA"
+        }
+    }
+==== workspace/packageB/index.d.ts (0 errors) ====
+    import { create } from "package-a";
+    export declare function invoke(): ReturnType<typeof create>;
+==== workspace/packageC/package.json (0 errors) ====
+    {
+        "private": true,
+        "dependencies": {
+            "package-b": "file:../packageB",
+            "package-a": "file:../packageA"
+        }
+    }
+==== workspace/packageC/index.d.ts (1 errors) ====
+    export declare const a: import("package-a").Foo;
+                                                ~~~
+!!! error TS2694: Namespace '"workspace/packageA/index"' has no exported member 'Foo'.
+    